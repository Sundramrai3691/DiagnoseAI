<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DiagnoseAI - Meddy | AI Health Assistant</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  
  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>const symptoms = {{ data | tojson | safe }};</script>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <a href="/" class="logo-link">
        <svg class="logo" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
          <path d="M20 8C15.6 8 12 11.6 12 16C12 20.4 15.6 24 20 24C24.4 24 28 20.4 28 16C28 11.6 24.4 8 20 8ZM20 22C16.7 22 14 19.3 14 16C14 12.7 16.7 10 20 10C23.3 10 26 12.7 26 16C26 19.3 23.3 22 20 22Z" fill="white"/>
          <path d="M20 12C17.8 12 16 13.8 16 16C16 18.2 17.8 20 20 20C22.2 20 24 18.2 24 16C24 13.8 22.2 12 20 12Z" fill="white"/>
          <path d="M20 26C18.9 26 18 26.9 18 28V30C18 31.1 18.9 32 20 32C21.1 32 22 31.1 22 30V28C22 26.9 21.1 26 20 26Z" fill="white"/>
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#2563eb"/>
              <stop offset="100%" style="stop-color:#06b6d4"/>
            </linearGradient>
          </defs>
        </svg>
        <div>
          <div class="brand-text">DiagnoseAI</div>
          <div class="brand-subtitle">AI Health Assistant</div>
        </div>
      </a>
      
      <nav class="nav-links">
        <button id="toggle-dark" class="btn btn-ghost" aria-label="Toggle dark mode">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
        <a href="https://github.com/Sundramrai3691/DiagnoseAI" target="_blank" rel="noopener" class="btn btn-ghost">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
          </svg>
          GitHub
        </a>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">Meet <span style="color: #fbbf24;">Meddy</span></h1>
        <p class="hero-subtitle">Your AI-powered health assistant for intelligent symptom analysis</p>
        <a href="#assistant" class="hero-cta">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
          Start Diagnosis
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features">
    <div class="container">
      <h2 class="section-title">Why Choose Meddy?</h2>
      <p class="section-subtitle">Advanced AI technology for personalized health insights</p>
      
      <div class="features-grid">
        <div class="feature-card">
          <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
          <h3 class="feature-title">Smart Diagnosis</h3>
          <p class="feature-description">Advanced ML models analyze your symptoms to provide accurate health insights and recommendations.</p>
        </div>
        
        <div class="feature-card">
          <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          </svg>
          <h3 class="feature-title">AI Chat Assistant</h3>
          <p class="feature-description">Interactive conversations with Meddy for general health queries and lifestyle advice.</p>
        </div>
        
        <div class="feature-card">
          <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
          </svg>
          <h3 class="feature-title">Instant Reports</h3>
          <p class="feature-description">Generate comprehensive PDF reports to share with healthcare professionals.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Assistant Section -->
  <main id="assistant" class="main-content">
    <div class="container">
      <h2 class="section-title">Start Your Health Assessment</h2>
      <p class="section-subtitle">Tell Meddy about your symptoms for personalized insights</p>

      <!-- User Details Form -->
      <div class="card user-details" id="user-details">
        <h3 class="text-center mb-4">Personal Information</h3>
        <form id="user-form">
          <div class="form-group">
            <label for="user-name" class="form-label">Full Name</label>
            <input type="text" id="user-name" class="form-control" placeholder="Enter your full name" required>
          </div>
          
          <div class="form-group">
            <label for="user-age" class="form-label">Age</label>
            <input type="number" id="user-age" class="form-control" placeholder="Enter your age" min="1" max="120" required>
          </div>
          
          <div class="form-group">
            <label for="user-gender" class="form-label">Gender</label>
            <select id="user-gender" class="form-control form-select" required>
              <option value="">Select your gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <button type="button" id="submit-details" class="btn btn-primary btn-full">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"/>
              <path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"/>
            </svg>
            Start Assessment
          </button>
        </form>
      </div>

      <!-- Chat Interface -->
      <div class="chat-container" style="display: none;">
        <div class="card">
          <div id="conversation" class="chat-body" role="log" aria-live="polite" aria-label="Conversation with Meddy">
            <div class="message bot-message">
              <strong>Hello!</strong> I'm <strong>Meddy</strong>, your AI health assistant. 
              Please describe your symptoms (e.g., "fever, headache, fatigue") and type <strong>"done"</strong> when finished.
            </div>
          </div>

          <div class="chat-input" id="chat-input-box">
            <textarea 
              id="message-text" 
              class="chat-input-field" 
              placeholder="Describe your symptoms..."
              rows="1"
              aria-label="Enter your symptoms"
            ></textarea>
            
            <button id="mic-btn" class="btn btn-ghost" aria-label="Voice input" title="Voice input">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                <line x1="12" y1="19" x2="12" y2="23"/>
                <line x1="8" y1="23" x2="16" y2="23"/>
              </svg>
            </button>
            
            <button id="send" class="btn btn-primary" aria-label="Send message">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"/>
                <polygon points="22,2 15,22 11,13 2,9 22,2"/>
              </svg>
            </button>
          </div>

          <!-- Symptom Suggestions -->
          <div class="symptoms-list-container" style="display: none;">
            <ul id="symptoms-list"></ul>
          </div>
        </div>
      </div>

      <!-- Diagnosis Results -->
      <section id="diagnosis-results" role="region" aria-label="Diagnosis results" aria-live="polite"></section>

      <!-- PDF Download Section -->
      <div id="pdf-section" class="pdf-section" style="display: none;">
        <a id="download-pdf" class="btn btn-danger" href="/download_pdf" download>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10,9 9,9 8,9"/>
          </svg>
          Download Medical Report
        </a>
      </div>
    </div>
  </main>

  <!-- Ask AI Section -->
  <section id="ask-ai-section" class="ask-ai-section container" style="display: none;">
    <div class="ask-ai-header">
      <h3 class="ask-ai-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
        </svg>
        Ask Meddy Anything
      </h3>
      <p class="text-muted">Get answers to your general health questions</p>
    </div>
    
    <div>
      <label for="ask-ai-input" class="sr-only">Ask a health question</label>
      <input 
        type="text" 
        id="ask-ai-input" 
        class="ask-ai-input" 
        placeholder="Ask about diet, symptoms, medications, lifestyle..."
        aria-label="Ask a health question"
      >
      <button id="ask-ai-btn" class="btn btn-success btn-full">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
        </svg>
        Ask Meddy
      </button>
      <div id="ai-reply" class="ai-reply" style="display: none;"></div>
    </div>
  </section>

  <!-- Floating Chat Toggle -->
  <button id="chat-toggle" class="chat-toggle" aria-label="Toggle chat" style="display: none;">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
    </svg>
  </button>

  <!-- Loading Spinner (Hidden by default) -->
  <div id="spinner" class="spinner" style="display: none;" aria-hidden="true"></div>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>